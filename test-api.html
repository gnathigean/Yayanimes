## 3Ô∏è‚É£ test-api-structure.html (NOVO ARQUIVO DE TESTE) ```html
<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>üîç Verificador de Estrutura da API</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background: #0f172a;
        color: white;
        padding: 20px;
      }

      .container {
        max-width: 1400px;
        margin: 0 auto;
      }

      h1 {
        text-align: center;
        color: #667eea;
        margin-bottom: 30px;
        font-size: 32px;
      }

      .section {
        background: #1e293b;
        padding: 20px;
        border-radius: 12px;
        margin-bottom: 20px;
      }

      .section h2 {
        color: #667eea;
        margin-bottom: 15px;
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .status {
        display: inline-block;
        padding: 4px 12px;
        border-radius: 20px;
        font-size: 12px;
        font-weight: 600;
      }

      .status.success {
        background: #10b981;
      }

      .status.error {
        background: #ef4444;
      }

      .status.empty {
        background: #f59e0b;
      }

      pre {
        background: #0f172a;
        padding: 15px;
        border-radius: 8px;
        overflow-x: auto;
        font-size: 12px;
        line-height: 1.5;
        max-height: 500px;
        overflow-y: auto;
        border: 2px solid #334155;
      }

      .summary {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 15px;
        margin-bottom: 20px;
      }

      .summary-card {
        background: #0f172a;
        padding: 15px;
        border-radius: 8px;
        border-left: 4px solid #667eea;
      }

      .summary-card h3 {
        font-size: 14px;
        color: #9ca3af;
        margin-bottom: 8px;
      }

      .summary-card .value {
        font-size: 24px;
        font-weight: 700;
        color: #667eea;
      }

      button {
        background: #667eea;
        color: white;
        border: none;
        padding: 15px 30px;
        border-radius: 8px;
        cursor: pointer;
        font-size: 16px;
        font-weight: 600;
        transition: all 0.3s;
        width: 100%;
      }

      button:hover {
        background: #5568d3;
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
      }

      .loading {
        text-align: center;
        padding: 40px;
        color: #9ca3af;
        font-size: 18px;
      }

      .grid {
        display: grid;
        gap: 15px;
      }

      .item-card {
        background: #0f172a;
        padding: 12px;
        border-radius: 8px;
        display: flex;
        gap: 12px;
        border: 2px solid #334155;
        transition: all 0.3s;
      }

      .item-card:hover {
        border-color: #667eea;
        transform: translateY(-2px);
      }

      .item-card img {
        width: 60px;
        height: 90px;
        object-fit: cover;
        border-radius: 6px;
      }

      .item-info {
        flex: 1;
      }

      .item-info h4 {
        font-size: 14px;
        margin-bottom: 6px;
        color: white;
      }

      .item-info p {
        font-size: 12px;
        color: #9ca3af;
        margin: 2px 0;
      }

      .alert {
        background: #1e40af;
        padding: 15px;
        border-radius: 8px;
        margin-bottom: 20px;
        border-left: 4px solid #3b82f6;
      }

      .alert p {
        margin: 5px 0;
      }

      ::-webkit-scrollbar {
        width: 10px;
        height: 10px;
      }

      ::-webkit-scrollbar-track {
        background: #1e293b;
      }

      ::-webkit-scrollbar-thumb {
        background: #667eea;
        border-radius: 5px;
      }

      ::-webkit-scrollbar-thumb:hover {
        background: #5568d3;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>üîç Verificador de Estrutura da API YayAnimes</h1>

      <div class="alert">
        <p>
          <strong>üìå Objetivo:</strong> Este teste verifica a estrutura EXATA
          dos dados retornados pela API.
        </p>
        <p>
          <strong>üéØ Use isso para:</strong> Identificar quais campos existem e
          como acess√°-los corretamente.
        </p>
      </div>

      <div class="section">
        <button onclick="testAPI()">üöÄ Testar API Homepage</button>
      </div>

      <div id="results" class="loading">
        Clique no bot√£o acima para iniciar o teste...
      </div>
    </div>

    <script>
      async function testAPI() {
        const resultsDiv = document.getElementById("results");
        resultsDiv.innerHTML =
          '<div class="loading">‚è≥ Carregando dados da API...<br>Aguarde alguns segundos...</div>';

        try {
          const startTime = performance.now();
          const response = await fetch(
            "https://yayapi-delta.vercel.app/api/v2/hianime/home"
          );
          const data = await response.json();
          const endTime = performance.now();
          const duration = (endTime - startTime).toFixed(2);

          console.log("üì¶ Dados completos da API:", data);

          let html = `
          <div class="section">
            <h2>‚è±Ô∏è Tempo de Resposta</h2>
            <p style="font-size: 20px; color: #10b981; font-weight: 600;">${duration}ms</p>
          </div>
        `;

          html += '<div class="summary">';

          // Verificar cada se√ß√£o poss√≠vel
          const sections = [
            {
              key: "spotlightAnimes",
              name: "‚≠ê Spotlight",
              path: "data.spotlightAnimes",
            },
            {
              key: "trendingAnimes",
              name: "üî• Trending",
              path: "data.trendingAnimes",
            },
            {
              key: "mostPopularAnimes",
              name: "üì∫ Popular",
              path: "data.mostPopularAnimes",
            },
            {
              key: "mostFavoriteAnimes",
              name: "‚ù§Ô∏è Favorites",
              path: "data.mostFavoriteAnimes",
            },
            { key: "top10Animes", name: "üèÜ Top 10", path: "data.top10Animes" },
            {
              key: "topAiringAnimes",
              name: "üì° Airing",
              path: "data.topAiringAnimes",
            },
            {
              key: "latestEpisodeAnimes",
              name: "üÜï Latest",
              path: "data.latestEpisodeAnimes",
            },
            {
              key: "latestCompletedAnimes",
              name: "‚úÖ Completed",
              path: "data.latestCompletedAnimes",
            },
            {
              key: "topUpcomingAnimes",
              name: "üîú Upcoming",
              path: "data.topUpcomingAnimes",
            },
            { key: "genres", name: "üé≠ Genres", path: "data.genres" },
          ];

          let totalItems = 0;
          let validSections = 0;

          sections.forEach((section) => {
            const sectionData = data.data?.[section.key] || data[section.key];
            let count = 0;
            let status = "empty";

            if (Array.isArray(sectionData)) {
              count = sectionData.length;
            } else if (sectionData?.today && Array.isArray(sectionData.today)) {
              count = sectionData.today.length;
            } else if (sectionData && typeof sectionData === "object") {
              count = Object.keys(sectionData).length;
            }

            if (count > 0) {
              status = "success";
              validSections++;
              totalItems += count;
            }

            html += `
            <div class="summary-card">
              <h3>${section.name}</h3>
              <div class="value">${count}</div>
              <span class="status ${status}">${
              status === "success" ? "‚úÖ OK" : "‚ö†Ô∏è Vazio"
            }</span>
              <p style="font-size: 11px; color: #6b7280; margin-top: 5px;">${
                section.path
              }</p>
            </div>
          `;
          });

          html += "</div>";

          // Resumo geral
          html += `
          <div class="section" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
            <h2 style="color: white;">üìä Resumo Geral</h2>
            <p style="font-size: 18px; color: white; margin: 10px 0;">
              <strong>${validSections}</strong> se√ß√µes v√°lidas encontradas
            </p>
            <p style="font-size: 18px; color: white; margin: 10px 0;">
              <strong>${totalItems}</strong> itens no total
            </p>
          </div>
        `;

          // Estrutura JSON completa
          html += `
          <div class="section">
            <h2>üìã Estrutura JSON Completa</h2>
            <pre>${JSON.stringify(data, null, 2)}</pre>
          </div>
        `;

          // Mostrar exemplo de trending animes
          const trending =
            data.data?.trendingAnimes || data.trendingAnimes || [];
          if (trending.length > 0) {
            html += `
            <div class="section">
              <h2>üî• Exemplo: Top 5 Trending Animes</h2>
              <div class="grid">
          `;

            trending.slice(0, 5).forEach((anime) => {
              html += `
              <div class="item-card">
                <img src="${anime.poster || anime.image || ""}" 
                     alt="${anime.name || anime.title}"
                     onerror="this.src='https://via.placeholder.com/60x90?text=No+Image'">
                <div class="item-info">
                  <h4>${anime.name || anime.title || "Sem t√≠tulo"}</h4>
                  <p>‚≠ê Rating: ${anime.rating || "N/A"}</p>
                  <p>üì∫ Episodes: ${
                    anime.episodes?.sub || anime.episodes || "N/A"
                  }</p>
                  <p>üÜî ID: <code style="color: #667eea;">${
                    anime.id || "N/A"
                  }</code></p>
                  <p>üé≠ Type: ${anime.type || "N/A"}</p>
                </div>
              </div>
            `;
            });

            html += "</div></div>";

            // Mostrar estrutura de UM item completo
            html += `
            <div class="section">
              <h2>üî¨ Estrutura Detalhada de 1 Item (Trending[0])</h2>
              <p style="margin-bottom: 15px; color: #9ca3af;">
                Use esta estrutura para saber exatamente quais campos est√£o dispon√≠veis:
              </p>
              <pre>${JSON.stringify(trending[0], null, 2)}</pre>
            </div>
          `;
          }

          // Recomenda√ß√µes
          html += `
          <div class="section" style="background: #065f46; border-left: 4px solid #10b981;">
            <h2 style="color: #d1fae5;">‚úÖ Pr√≥ximos Passos</h2>
            <ol style="color: #d1fae5; padding-left: 20px; line-height: 1.8;">
              <li>Verifique os campos dispon√≠veis na estrutura acima</li>
              <li>Confirme se <code>data.spotlightAnimes</code>, <code>data.trendingAnimes</code>, etc. existem</li>
              <li>Verifique se <code>top10Animes</code> est√° em <code>top10Animes.today</code></li>
              <li>Copie a estrutura de um item e me envie se houver d√∫vidas</li>
              <li>Use essas informa√ß√µes para ajustar o mapeamento no c√≥digo</li>
            </ol>
          </div>
        `;

          resultsDiv.innerHTML = html;
        } catch (error) {
          resultsDiv.innerHTML = `
          <div class="section" style="background: #7f1d1d; border-left: 4px solid #ef4444;">
            <h2 style="color: #fecaca;">‚ùå Erro ao Carregar Dados</h2>
            <pre style="color: #fecaca;">${error.message}\n\n${error.stack}</pre>
            <p style="color: #fecaca; margin-top: 15px;">
              <strong>Poss√≠veis causas:</strong><br>
              ‚Ä¢ API fora do ar<br>
              ‚Ä¢ Problema de CORS<br>
              ‚Ä¢ Conex√£o com internet<br>
              ‚Ä¢ URL da API incorreta
            </p>
          </div>
        `;
          console.error("‚ùå Erro:", error);
        }
      }
    </script>
  </body>
</html>
