<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Teste API</title>
    <style>
      body {
        font-family: monospace;
        background: #0f172a;
        color: white;
        padding: 20px;
      }
      pre {
        background: #1e293b;
        padding: 15px;
        border-radius: 8px;
        overflow-x: auto;
      }
      button {
        background: #667eea;
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 6px;
        cursor: pointer;
        margin: 5px;
      }
      button:hover {
        background: #5568d3;
      }
    </style>
  </head>
  <body>
    <h1>üß™ Teste da API</h1>

    <div>
      <button onclick="testHomepage()">Testar Homepage</button>
      <button onclick="testSearch()">Testar Busca</button>
      <button onclick="testAnimeInfo()">Testar Info Anime</button>
    </div>

    <h2>Resultado:</h2>
    <pre id="output">Clique em um bot√£o para testar...</pre>

    <script src="api-service.js"></script>
    <script>
      async function testHomepage() {
        const output = document.getElementById("output");
        output.textContent = "Carregando...";

        try {
          const data = await window.AnimeAPI.loadContentForHomepage();
          output.textContent = JSON.stringify(data, null, 2);
          console.log("‚úÖ Homepage data:", data);
        } catch (error) {
          output.textContent = `‚ùå Erro: ${error.message}\n\n${error.stack}`;
          console.error(error);
        }
      }

      async function testSearch() {
        const query = prompt("Digite o nome do anime:", "naruto");
        if (!query) return;

        const output = document.getElementById("output");
        output.textContent = "Buscando...";

        try {
          const data = await window.AnimeAPI.searchAnimes(query);
          output.textContent = JSON.stringify(data, null, 2);
          console.log("‚úÖ Search results:", data);
        } catch (error) {
          output.textContent = `‚ùå Erro: ${error.message}\n\n${error.stack}`;
          console.error(error);
        }
      }

      async function testAnimeInfo() {
        const id = prompt("Digite o ID do anime:", "one-piece-100");
        if (!id) return;

        const output = document.getElementById("output");
        output.textContent = "Carregando info...";

        try {
          const data = await window.AnimeAPI.getAnimeInfo(id);
          output.textContent = JSON.stringify(data, null, 2);
          console.log("‚úÖ Anime info:", data);
        } catch (error) {
          output.textContent = `‚ùå Erro: ${error.message}\n\n${error.stack}`;
          console.error(error);
        }
      }

      // Verificar se API carregou
      window.addEventListener("load", () => {
        if (window.AnimeAPI) {
          console.log("‚úÖ API carregada com sucesso!");
          document.getElementById("output").textContent =
            "‚úÖ API carregada! Clique nos bot√µes para testar.";
        } else {
          console.error("‚ùå API n√£o foi carregada!");
          document.getElementById("output").textContent =
            "‚ùå Erro: API n√£o carregada!";
        }
      });
    </script>
  </body>
</html>
